<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-135079836-3","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135079836-3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-135079836-3",{})</script><title data-react-helmet="true">Image Feature Extraction | MMF</title><meta data-react-helmet="true" property="og:image" content="https://mmf.sh/img/logo.png"><meta data-react-helmet="true" property="twitter:image" content="https://mmf.sh/img/logo.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for MMF"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Image Feature Extraction | MMF"><meta data-react-helmet="true" name="description" content="In this tutorial, we will go through the step-by-step process of generating image features with FasterRCNN feature extractors. MMF provides utility scripts for running image feature extractions using different models (Faster RCNN with X-101 backbones and X-152 backbones). For example: tools/scripts/features/extractfeaturesvmb.py. The script allows you to optionally parallelize the feature extraction execution."><meta data-react-helmet="true" property="og:description" content="In this tutorial, we will go through the step-by-step process of generating image features with FasterRCNN feature extractors. MMF provides utility scripts for running image feature extractions using different models (Faster RCNN with X-101 backbones and X-152 backbones). For example: tools/scripts/features/extractfeaturesvmb.py. The script allows you to optionally parallelize the feature extraction execution."><meta data-react-helmet="true" property="og:url" content="https://mmf.sh/docs/tutorials/image_feature_extraction"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://mmf.sh/docs/tutorials/image_feature_extraction"><link rel="stylesheet" href="/styles.f65714b6.css">
<link rel="preload" href="/styles.d2584b47.js" as="script">
<link rel="preload" href="/runtime~main.42d74f31.js" as="script">
<link rel="preload" href="/main.0a5c5267.js" as="script">
<link rel="preload" href="/1.f99363a3.js" as="script">
<link rel="preload" href="/2.b5338204.js" as="script">
<link rel="preload" href="/35.585a8b5e.js" as="script">
<link rel="preload" href="/20ac7829.e2e48f9e.js" as="script">
<link rel="preload" href="/1b3e6291.ec92a6d0.js" as="script">
</head>
<body>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/banner_logo.svg" alt="MMF Logo"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/api_redirect">API</a><a href="https://github.com/facebookresearch/mmf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/banner_logo.svg" alt="MMF Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/api_redirect">API</a></li><li class="menu__list-item"><a href="https://github.com/facebookresearch/mmf" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Image Feature Extraction</h1></header><div class="markdown"><p>In this tutorial, we will go through the step-by-step process of generating image features with FasterRCNN feature extractors. MMF provides utility scripts for running image feature extractions using different models (Faster RCNN with X-101 backbones and X-152 backbones). For example: <code>tools/scripts/features/extract_features_vmb.py</code>. The script allows you to optionally parallelize the feature extraction execution.</p><p>Here are the steps in a nut shell:</p><ul><li>Prerequisites: setup</li><li>Install vqa-maskrcnn-benchmark</li><li>Download the dataset (not covered in this tutorial)</li><li>Identify which vision feature extractor you&#x27;d like to use</li><li>Extract image features</li><li>Extract image features with slurm</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="prerequisites-setup"></a>Prerequisites: setup<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisites-setup" title="Direct link to heading">#</a></h2><p>Create a new conda environment for feature extraction repo installation:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda create -n maskrcnn_benchmark</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda activate maskrcnn_benchmark</span></div></div></div></div></div><p>A new conda environment is created so that the installation does not mess with the mmf conda environment.</p><p>Follow <a href="https://www.internalfb.com/intern/staticdocs/mmf/docs/getting_started/installation#install-from-source-recommended" target="_blank" rel="noopener noreferrer">this</a> to install mmf in this new conda environment: maskrcnn_benchmark</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="install-vqa-maskrcnn-benchmark"></a>Install vqa-maskrcnn-benchmark<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-vqa-maskrcnn-benchmark" title="Direct link to heading">#</a></h2><p>The following instructions is to install the maskrcnn-benchmark repo from <a href="https://gitlab.com/vedanuj/vqa-maskrcnn-benchmark" target="_blank" rel="noopener noreferrer">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="requirements"></a>Requirements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#requirements" title="Direct link to heading">#</a></h3><ul><li>PyTorch &gt;1.0 from a nightly release. Installation instructions can be found in <a href="https://pytorch.org/get-started/locally/" target="_blank" rel="noopener noreferrer">this</a></li><li>torchvision from master</li><li>cocoapi</li><li>yacs</li><li>matplotlib</li><li>GCC &gt;= 4.9</li><li>(optional) OpenCV for the webcam demo</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="step-by-step-installation"></a>Step-by-step installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-by-step-installation" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># first, make sure that your conda is setup properly with the right environment</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># for that, check that `which conda`, `which pip` and `which python` points to the</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># right path. From a clean conda env, this is what you need to do</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># this installs the right pip and dependencies for the fresh python</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> ipython</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># maskrcnn_benchmark and coco api dependencies</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> ninja yacs cython matplotlib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># follow PyTorch installation in https://pytorch.org/get-started/locally/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pytorch-nightly -c pytorch</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># install torchvision</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> ~/github</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/pytorch/vision.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> vision</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python setup.py </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># install pycocotools</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> ~/github</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/cocodataset/cocoapi.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> cocoapi/PythonAPI</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python setup.py build_ext </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># install PyTorch Detection</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> ~/github</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://gitlab.com/vedanuj/vqa-maskrcnn-benchmark.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> vqa-maskrcnn-benchmark</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the following will install the lib with</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># symbolic links, so that you can modify</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the files if you want and won&#x27;t need to</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># re-build it</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python setup.py build develop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># or if you are on macOS</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># MACOSX_DEPLOYMENT_TARGET=10.9 CC=clang CXX=clang++ python setup.py build develop</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="feature-extractors"></a>Feature Extractors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#feature-extractors" title="Direct link to heading">#</a></h2><p>We provide the model weights of two feature extractors based on <a href="https://arxiv.org/pdf/1506.01497.pdf">FasterRCNN</a>: Resnet101 and Resnet152. They are pretrained on <a href="https://arxiv.org/abs/1602.07332">VisualGenome</a>. In this tutorial, we use the FasterRCNN-ResNet101 feature extractor.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>To use a different feature extractor, you can override the <code>model_file</code> param to point at the feature extractor model file.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="extract-image-features"></a>Extract Image Features<a aria-hidden="true" tabindex="-1" class="hash-link" href="#extract-image-features" title="Direct link to heading">#</a></h2><p>Images in <code>&lt;FOLDER_PATH_TO_DATASET&gt;</code> that have PNG/JPG/JPEG extensions will have their features extracted with the following invocation.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">python mmf/mmf/tools/scripts/features/extract_features_vmb.py --model_name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">X-152 --image_dir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">FOLDER_PATH_TO_DATASET</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --output_folder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">OUTPUT_FOLDER</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="extract-image-features-with-cluster-workload-manager-eg-slurm"></a>Extract Image Features with cluster workload manager (e.g., Slurm)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#extract-image-features-with-cluster-workload-manager-eg-slurm" title="Direct link to heading">#</a></h2><p>We can utilize slurms based cluster workload manager to do image feature extraction in parallel on multiple machines. This can greatly speed up the processing time if you have lots of images that need to have their features extracted. Please refer to <code>mmf/mmf/tools/scripts/features/extract_features_vmb.py</code> to see how you can adapt it to work for your purpose. As an example here, I showcase how to run image feature extraction on Flickr test set on 2 machines.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="separate-the-images-into-2-set"></a>Separate the images into 2 set<a aria-hidden="true" tabindex="-1" class="hash-link" href="#separate-the-images-into-2-set" title="Direct link to heading">#</a></h3><p>Create a <code>&lt;IMAGE_LISTS_FOLDER&gt;</code> folder that contains 2 files, each of the file contains a list of full image paths with newline as delimiter.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(191, 199, 213)">image_list</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">ls</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token variable" style="color:rgb(191, 199, 213)">IMAGE_LISTS_FOLDER</span><span class="token variable operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sbatch --mem 128GB --nodes</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> --gres</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">gpu:1 --partition</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">your_partition</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --time</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3000</span><span class="token plain"> --cpus-per-task</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    flickr_test_extract_image_feature.sh </span><span class="token variable" style="color:rgb(191, 199, 213)">$image_list</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">done</span></div></div></div></div></div><p>Separately, in <code>flickr_test_extract_image_feature.sh</code> write the following:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">python tools/scripts/features/extract_features_vmb.py </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    --image_dir </span><span class="token variable" style="color:rgb(191, 199, 213)">$1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    --output_folder /checkpoint/ronghanghu/misc/open_images_vmb_feat/train </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    --model_file data/vmb_feat_extraction/detectron_model.pth </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    --config_file data/vmb_feat_extraction/detectron_model.yaml</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebookresearch/mmf/edit/master/website/docs/tutorials/image_feature_extraction.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-12-08T00:41:05.000Z" class="docLastUpdatedAt_1sqk">12/8/2020</time> by <strong>Sasha Sheng</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites-setup" class="table-of-contents__link">Prerequisites: setup</a></li><li><a href="#install-vqa-maskrcnn-benchmark" class="table-of-contents__link">Install vqa-maskrcnn-benchmark</a><ul><li><a href="#requirements" class="table-of-contents__link">Requirements</a></li><li><a href="#step-by-step-installation" class="table-of-contents__link">Step-by-step installation</a></li></ul></li><li><a href="#feature-extractors" class="table-of-contents__link">Feature Extractors</a></li><li><a href="#extract-image-features" class="table-of-contents__link">Extract Image Features</a></li><li><a href="#extract-image-features-with-cluster-workload-manager-eg-slurm" class="table-of-contents__link">Extract Image Features with cluster workload manager (e.g., Slurm)</a><ul><li><a href="#separate-the-images-into-2-set" class="table-of-contents__link">Separate the images into 2 set</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/pytorch/bootstrapping-a-multimodal-project-using-mmf-a-pytorch-powered-multimodal-framework-464f75164af7" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/facebookresearch/mmf" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1Wg7"><img class="footer__logo" alt="Facebook Open Source Logo" src="/img/oss_logo.png"></a></div><div>Copyright © 2021 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.d2584b47.js"></script>
<script src="/runtime~main.42d74f31.js"></script>
<script src="/main.0a5c5267.js"></script>
<script src="/1.f99363a3.js"></script>
<script src="/2.b5338204.js"></script>
<script src="/35.585a8b5e.js"></script>
<script src="/20ac7829.e2e48f9e.js"></script>
<script src="/1b3e6291.ec92a6d0.js"></script>
</body>
</html>